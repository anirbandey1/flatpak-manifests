app-id: io.github.soufrabi.OpenAiClient
runtime: org.freedesktop.Platform
runtime-version: '22.08'
sdk: org.freedesktop.Sdk
command: openai-client
rename-desktop-file: openai-client.desktop
rename-icon: openai-client
finish-args:
  - --device=dri
  - --share=ipc
  - --share=network
  - --socket=x11
  - --socket=pulseaudio
  # - --filesystem=home
modules:

  - name: openai-client
    buildsystem: simple
    build-commands:
      - ar -x openai-client.deb
      - rm -f openai-client.deb
      - tar -xf data.tar.*
      - rm -f control.tar.gz data.tar.* debian-binary
      - cp -rv usr/bin /app/bin
      - cp -rv usr/share /app/share
      - cp -rv opt /app
      - desktop-file-edit --set-key=Exec --set-value="/app/bin/openai-client" /app/share/applications/openai-client.desktop
      - desktop-file-edit --set-key=Icon --set-value="io.github.soufrabi.OpenAiClient" /app/share/applications/openai-client.desktop

    sources:
      - type: file
        url: "https://github.com/soufrabi/openai-client/releases/download/v1.0.2/openai-client.deb"
        dest-filename: "openai-client.deb"
        sha256: "a4203bdec3810d594ff49158d3a382000f9e833791516b052079ee4c629bb243"
